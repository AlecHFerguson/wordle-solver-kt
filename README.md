# Wordle Solver KT
Fast, comprehensive solver for the Wordle game, written in Kotlin.

The New York Times Wordle game has 14,855 guessable words; this solver solves 73% within 6 tries.
Average solution time is 6.8 ms.

For example, solving the word `skier`:
* lares => â¬›â¬›ðŸŸ¨ðŸŸ©â¬›, 890 words remaining
* roset => ðŸŸ¨â¬›ðŸŸ¨ðŸŸ©â¬›, 390 words remaining
* sider => ðŸŸ©ðŸŸ¨â¬›ðŸŸ©ðŸŸ©, 19 words remaining
* miche => â¬›ðŸŸ¨â¬›â¬›ðŸŸ¨, 16 words remaining
* speer => ðŸŸ©â¬›â¬›ðŸŸ©ðŸŸ©, 5 words remaining
* syker => ðŸŸ©â¬›ðŸŸ¨ðŸŸ©ðŸŸ©, 2 words remaining
* skier => ðŸŸ©ðŸŸ©ðŸŸ©ðŸŸ©ðŸŸ©

## Setup
### Install Java and Gradle
You can install any way you like; I recommend [SDK Man](https://sdkman.io). Follow instructions there to download; then:
```shell
sdk install java 19-open
sdk install gradle 7.5.1
```

### Run Tests
```shell
./gradlew test
```

## How It Works
### 1. Generate Average Eliminated Per Word
We need a "best word" to guess with at first. As an offline process, try each word as an opening guess word against
each word as a game word. Count the number of guesses eliminated -- based on the response, how many words are no longer
available as a solution? Average the number of guesses eliminated per word.

This **average eliminated** will help us guess later. It will inform our starting word; the current winner is `lares`.
Also, we can cut down on guesses to make later.

Average Eliminated is generated by running `CreateMostEliminatedPipeline`, an Apache Beam pipeline.
The output is Avro. Download this Avro file to the `resources` dir to reference.

### 2. Identify Best Guess Word
Best guess word is identified by running all available guesses as game word against all guesses as solution word.
Test score is:
* 2 for Correct
* 1 for OtherSlot
* 0 for NotPresent

The available guess with the highest average score is selected.

#### Pre-Filtering
If we have too many available guesses then testing would take too long. We cut down guesses by:
1. Sort by highest Average Eliminated score (from offline process above)
2. Take the top 69, test those against all available guesses

This was found to significantly improve performance while having little effect on solving.

#### Variety Guess
I often found that I got something like this:
* bates => â¬›ðŸŸ©ðŸŸ©ðŸŸ©ðŸŸ©

B is not present, but the other slots are `a`, `t`, `e`, `s`. This leaves a ton of guesses: cates, dates, fates, gates,
hates, kates, lates, mates ... you get the idea.

A "variety guess" is intended to eliminate a ton of letters. Go through available guesses; prioritize guesses
containing letters which:
* We have not seen yet
* Are vowels
* We have seen

I don't have data just yet on how effective the variety guess is at eliminating guesses. Still TODO.

### 3. Eliminate Letters
We track a Letter Map -- a map containing all available letters per slot. It starts with `A - Z` in all 5 slots.
Upon receiving a guess result we update the letters per slot:
* Correct => Set that slot to one available letter
* OtherSlot => Remove that letter from this slot
* NotPresent => Remove that letter from all slots, except slots which are Correct

### 4. Eliminate Guesses
With available letters, traverse the Word Tree to find available guesses.

## Performance
Running `SolveAllWords` plays the game for all words, then generates a JSON file like below from the most recent run.
```json
{
  "totalCount": 14855,
  "guessDistribution": {
    "1": 1,
    "2": 97,
    "3": 638,
    "4": 2300,
    "5": 4370,
    "6": 3532,
    "7": 2040,
    "8": 939,
    "9": 503,
    "10": 238,
    "11": 122,
    "12": 51,
    "13": 18,
    "14": 5,
    "15": 1
  },
  "averageTime": 6.891215079097947,
  "minTime": 0,
  "maxTime": 388,
  "timeDistribution": {
    "0": 16,
    "10": 11403,
    "20": 3322,
    "30": 95,
    "40": 12,
    "50": 3,
    "60": 1,
    "90": 1,
    "100": 1,
    "390": 1
  },
  "maxGuessWords": [
    "zeals",
    "eales",
    "rases",
    "raxed",
    "seals",
    "zetas",
    "felts",
    "gager",
    "jades",
    ...
  ]
}
```
`guessDistribution` shows number of words requiring each number of guesses (the 1 is "lares", always the first guess
word). New experiments can be tested against previous to ensure they shift guess counts down.

We care about performance, that's why we use Kotlin. `averageTime` and `timeDistribution` are in milliseconds -- 6.89
is pretty good.

`maxGuessWords` gives us words which took a lot of guesses. We can test them and see where guessing logic can be
improved.

## Future Improvements
This is the first version. Some things to improve in the future.

### Command Line Interface
At present, you can solve by running `WordlePlayerTest#testSolve()`. Solve all words by running `SolveAllWords`.
I need to create a command line interface. Also, users should be able to play the game from command line.

### Common Words
At present the game uses all 14,855 guessable words. This includes a ton which you've probably never seen -- Can you
use `syver` in a sentence?? More importantly, it's too many possibilities for 6 guesses. I think that by narrowing
down to common words, the solver will be able to solve nearly all within 6 guesses. For future work.
